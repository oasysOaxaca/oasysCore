"use strict";angular.module("oasyscore",["angularFileUpload"]).config(["$routeProvider",function(a){}]),angular.module("oasyscore").service("$corefactory",["$http","$urlResolved","$upload","$log",function(a,b,c,d){var e=function(a,b){if(!b)return console.log(" SIN CODIFICAR"),a;var c,d,e,f,g,h,i,j="";for(c in a)if(d=a[c],d instanceof Array)for(i=0;i<d.length;++i)g=d[i],e=c+"["+i+"]",h={},h[e]=g,j+=param(h)+"&";else if(d instanceof Object)for(f in d)g=d[f],e=c+"["+f+"]",h={},h[e]=g,j+=param(h)+"&";else void 0!==d&&null!==d&&(j+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&");return j.length?j.substr(0,j.length-1):j},f=function(c,f,g,h){var i=!1;void 0===h||null===h?h={method:"GET",contentType:"application/json",transformRequestData:!1}:(d.debug("Default config :: ",h),(void 0===h.method||null==h.method||0==h.method.lengt)&&(d.debug("Method Default GET For ",c),h.method="GET"),(void 0===h.contentType||null==h.contentType||0==h.contentType.lengt)&&(d.debug("Content - Type Default application/json For ",c),h.contentType="application/json"),void 0!==h.transformRequestData&&null!==h.transformRequestData&&h.transformRequestData&&"application/x-www-form-urlencoded"===h.contentType&&"POST"==h.method?i=!0:void 0!==h.transformRequestData&&null!==h.transformRequestData&&h.transformRequestData&&"application/x-www-form-urlencoded"!==h.contentType&&d.warn("ERROR encode is activate but the content-Type its Wrong please read de framework doc"),"POST"==h.method&&(console.log("POST ::::"),a.defaults.headers.post["Content-Type"]=h.contentType)),b.getUrl(c,function(b){a({method:h.method,url:b,cache:!0,data:e(f,i)}).success(function(a){g(a)}).error(function(a){d.error("Request wrong :: ",a),g({message:"Ups! existe un problema con el servidor "+b})})})},g=function(a,b,c){d.debug("Execute Option GET",a,b),f(a,b,c,{})},h=function(a,b,c){var d={method:"POST",contentType:"application/x-www-form-urlencoded",transformRequestData:!0};f(a,b,c,d)},i=function(a,b,c){var d={method:"POST",contentType:"",transformRequestData:!1};f(a,b,c,d)};return{executePHP:g,executeGET:g,executePostPHP:h,executePost:i,execute:f,excuteWhithFile:function(a,d,e){console.log("excuteWhithFile ",a,d),(void 0===d.file||null==d.file)&&(console.log("especifique el objeto file:{type:'',name:'',file:''}, consulte Manual del Framwork"),e({transaction:"error",message:"Falta estructura de archivo"})),b.getUrl(a,function(b){d.userId="0",null!=b?c.upload({url:b,method:"POST",data:d,file:d.file.file}).progress(function(a){console.log("percent: "+parseInt(100*a.loaded/a.total))}).success(function(a,b,c,d){e(a)}).error(function(){e({transaction:"error",message:"Ups! existe un problema con el servidor "+apiUrl+b})}):e({transaction:"error",message:"CODE :"+a+" IS NOT REGISTERED YET IN API, PLEASE READ THE FRAMEWORK DOC"})})}}}]),angular.module("oasyscore").service("$urlResolved",["$http",function(a){return{getUrl:function(b,c){a({method:"GET",url:"./api/urlRequest.json",cache:!0,contentType:"application/json"}).success(function(a){for(var d=null,e=a.length-1;e>=0;e--)if(a[e].code===b){d=a[e].url;break}c(d)}).error(function(){console.log("GETURL SERVICE UNAVAILABLE")})}}}]);